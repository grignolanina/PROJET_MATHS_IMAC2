<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Loi Binom</title>
</head>
<body>
	<h1 class="binom">Loi binom</h1>
	<form id="myForm">
		<label for="myName">Valeur pour n (entier) :</label>
		<input type="int" id="n" name="name">
		<label for="myName">Valeur pour p (float) :</label>
		<input type="float" id="p" name="name">
		<button type="button" onclick="lanceBinom()">Binom</button>

		<!-- <input type="submit" value="Envoyer !"> -->
	  </form>
	
</body>
</html>
<script>
	//binom.addEventListener(MouseEvent)

	//c'était pour afficher les resultats en fonction de ce que l'utilisateur rentre
	// function lanceBinom(){}

	// tabProba()
	// tabFreq()



	function prob_binom(k, n, p){
			return (fact(n)/(fact(k)*fact(n-k)))* Math.pow(p,k) * Math.pow((1-p), (n-k))
		}

	
		
	function fact(nbr){
		var i, nbr, f = 1;
		for(i = 1; i <= nbr; i++)  
		{
			f = f * i;   // ou f *= i;
		}  
		return f;
	}

	//n nombre d'essai
	//p prob

	//methode pour prog
	//je prends 1: 0
	//je balance mon rand 
	//si rand > p0 j'add p1
	//si rand > p0 +p1 je rajouter p2
	//si rand < p0 + p1 + p2 
	//je dis que mon rand c'est p3

	//au lieu de faire pleins de test sur chaque bout
	//je fais une boucle jusqu'à ce que je dépasse

	function binom(n, p){
		let Sk = 0
		let U = Math.random() //U entre 0 et 1 
		let k=0

		while(U>Sk){
				Sk += prob_binom(k, n, p)
				k++

		}
		return k
	}

	function binomTabProba(n,p){
		var tabProba =[]
		for(let i = 0; i < n; i++){
			tabProba[i]=prob_binom(i, n, p)
		}
		return tabProba
		//console.log("tab proba : ", tabProba)
	}

	function binomTabFreq(n, p, nbExperience){
		var tabFreq = new Array(n).fill(0);
		
		for(let rep = 0; rep < nbExperience; rep++){
			//nous renvoie un entier entre 0 et n grâce à la loi binomiale
			let indice = binom(n, p)-1
			
			let val = tabFreq[indice]
			tabFreq[indice]=val+1

		}

		for(let i = 0; i<n; i++){
			tabFreq[i]= tabFreq[i]/nbExperience
		}

		return tabFreq

		//console.log("tab fred : ", tabFreq)

		

	}

	function prob_geometric(p,k){
		return p*(Math.pow(1-p, k-1))
	}


	function geometric(p){
		let Sk = 0
		let U = Math.random() //U
		let k=0

		while(U>Sk){
				Sk += prob_geometric(p, k)
				k++
		}
		console.log("U = ", U ,"proba geo : ", k)
		return k
	}

	
	function displayGeom(p){
	let k = geometric(p);
	let prob_k = prob_geometric(p, k)
	console.log("LOI GEOMETRIQUE : ")
	console.log("Numero tiré k = " , k)
	console.log("Probabilité d'avoir k : ", prob_k)

	}

	function displayBinom(n, p, nbExperience){
		let k = binom(n,p);
		let tabProbaBinom = binomTabProba(n,p)
		let freqObtenues = binomTabFreq(n,p,nbExperience)
		console.log("LOI BINOMIALE : ")
		console.log("Numero tiré k = " , k)
		console.log("Tableau des probabilité correspondant = " , tabProbaBinom)
		console.log("Tableau des fréquences obtenues = " , freqObtenues)

	}

	displayBinom(15, 0.3, 100000)
	displayGeom(0.4)
	

</script>